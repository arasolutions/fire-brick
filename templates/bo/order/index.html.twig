{% extends 'bo/base.html.twig' %}

{% block title %}Création de votre projet | Etape 1{% endblock %}

{% block stylesheets %}
    <link href="{{ asset('assets/bo/vendor/cubeportfolio-full/cubeportfolio/css/cubeportfolio.min.css') }}"
          rel="stylesheet">
{% endblock %}


{% block body %}
    <section class="g-bg-firebrock-light-v5">
        <div class="container g-py-100">
            <div class="row justify-content-center">
                <div class="col-sm-12 col-lg-10">
                    <div class="u-shadow-v21 g-bg-white rounded g-py-40 g-px-30">
                        {% include 'bo/order/wizard.html.twig' with {'step': 1} %}

                        <div id="nav-1-2-default-hor-left-big-icons" class="tab-content">
                            <div class="tab-pane fade show active" id="nav-1-2-default-hor-left-big-icons--1"
                                 role="tabpanel">
                                <div id="wizard-tab1" class="tab-pane">
                                    {{ form_start(form, {'attr':{'method':'post', 'action': path('order', {'product': product.id }),'class':'form-horizontal'}}) }}
                                    <div class="row text-center mt20">
                                        <div class="col-sm-6 text-bold bandeau-blue">Site {{ product.name }}</div>
                                        {% if not product.codePromotion %}
                                            <div class="col-sm-6 bandeau-white">A partir de
                                                <span class="">{{ product.price }} €</span>/mois
                                            </div>
                                        {% endif %}
                                    </div>
                                    <hr class="g-brd-gray-light-v4 g-mx-minus-30">
                                    {% if not product.codePromotion %}
                                        <div class="col-sm-6">
                                            <div class="form-group">
                                                <div class="input-group mar-btm">
                                                    {{ form_widget(form.codePromo, {'attr':{'class':'form-control', 'placeholder':'Code promotion'}}) }}
                                                    <span class="input-group-btn ml20">
                                                        <button id="codePromoBtn" type="submit" class="btn btn-blue btn-lg">OK !</button>
                                                    </span>
                                                </div>
                                                <div class="form-errors">
                                                    {{ form_errors(form.codePromo) }}
                                                </div>
                                            </div>
                                        </div>
                                    {% else %}
                                        <div class="col-sm-6 bandeau-white">A partir de <br/>
                                            <span class="price text-2x">{{ product.price }}€</span>/mois
                                            {{ form_widget(form.codePromo, {'attr':{'class':'hidden'}}) }}
                                        </div>
                                    {% endif %}
                                    <hr class="g-brd-gray-light-v4 g-mx-minus-30">
                                    <div class="col-sm-12 form-group">
                                        {{ form_label(form.name, null, {'label_attr':{'class':'g-mb-10'}}) }}
                                        {{ form_widget(form.name, {'attr':{'class':'form-control form-control-md rounded-0'}}) }}
                                    </div>
                                    <div class="col-sm-12 form-errors">
                                        {{ form_errors(form.name) }}
                                    </div>
                                    <div class="col-sm-12 form-group">
                                        {{ form_label(form.logo, null, {'label_attr':{'class':'control-label'}}) }}
                                        {{ form_widget(form.logo, {'attr':{'class':'form-control input-lg'}}) }}
                                    </div>
                                    <hr class="g-brd-gray-light-v4 g-mx-minus-30">

                                    <div class="col-sm-12 form-group">
                                        {{ form_label(form.template, null, {'label_attr':{'class':'g-mb-10'}}) }}
                                        <span class="form-errors">{{ form_errors(form.template) }}</span>
                                    </div>
                                    <div class="col-sm-12">
                                        <!--
                                        <ul id="filterControls" class="d-block list-inline text-center g-mb-50">
                                            <li class="list-inline-item cbp-filter-item cbp-filter-item-active g-brd-around g-brd-gray-light-v4 g-brd-primary--active g-color-gray-dark-v4 g-color-primary--hover g-color-primary--active g-font-size-12 rounded g-transition-0_3 g-px-20 g-py-7 mb-2"
                                                role="button" data-filter="*">All
                                            </li>
                                            <li class="list-inline-item cbp-filter-item g-brd-around g-brd-gray-light-v4 g-brd-primary--active g-color-gray-dark-v4 g-color-primary--hover g-color-primary--active g-font-size-12 rounded g-transition-0_3 g-px-20 g-py-7 mb-2"
                                                role="button" data-filter=".identity">Identity
                                            </li>
                                            <li class="list-inline-item cbp-filter-item g-brd-around g-brd-gray-light-v4 g-brd-primary--active g-color-gray-dark-v4 g-color-primary--hover g-color-primary--active g-font-size-12 rounded g-transition-0_3 g-px-20 g-py-7 mb-2"
                                                role="button" data-filter=".design">Design
                                            </li>
                                            <li class="list-inline-item cbp-filter-item g-brd-around g-brd-gray-light-v4 g-brd-primary--active g-color-gray-dark-v4 g-color-primary--hover g-color-primary--active g-font-size-12 rounded g-transition-0_3 g-px-20 g-py-7 mb-2"
                                                role="button" data-filter=".graphic">Graphic
                                            </li>
                                            <li class="list-inline-item cbp-filter-item g-brd-around g-brd-gray-light-v4 g-brd-primary--active g-color-gray-dark-v4 g-color-primary--hover g-color-primary--active g-font-size-12 rounded g-transition-0_3 g-px-20 g-py-7 mb-2"
                                                role="button" data-filter=".graphic, .identity">Design &amp; Identity
                                            </li>
                                        </ul>-->
                                        <div class="cbp text-center" data-controls="#filterControls" data-animation="quicksand"
                                             data-x-gap="10" data-y-gap="10" data-media-queries='[
                                                 {"width": 1500, "cols": 6},
                                                 {"width": 1100, "cols": 6},
                                                 {"width": 800, "cols": 4},
                                                 {"width": 480, "cols": 3},
                                                 {"width": 300, "cols": 2},
                                                 {"width": 0, "cols": 1}
                                               ]'>
                                            <!-- Cube Portfolio Blocks - Item -->
                                            {% for template in templates %}
                                                <div class="cbp-item identity design" data-id="{{ template.id }}">
                                                    <div class="u-block-hover g-parent">
                                                        <img class="img-fluid g-transform-scale-1_1--parent-hover g-transition-0_5 g-transition--ease-in-out"
                                                             src="{{ asset('templates/template-' ~ template.id ~ '/sticker.png') }}"
                                                             alt="Image description">
                                                        <div class="d-flex w-100 h-100 g-bg-black-opacity-0_6 opacity-0 g-opacity-1--parent-hover g-pos-abs g-top-0 g-left-0 g-transition-0_3 g-transition--ease-in u-block-hover__additional--fade u-block-hover__additional--fade-in g-pa-15">
                                                            <ul class="align-items-end flex-column list-inline mt-auto ml-auto mb-0">
                                                                <li class="list-inline-item">
                                                                    <a class="u-icon-v2 u-icon-size--xs g-brd-white g-color-black g-bg-white rounded-circle"
                                                                       href="#">
                                                                        <i class="icon-communication-095 u-line-icon-pro"></i>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="g-bg-white text-center g-pa-15">
                                                        <h3 class="h6 g-color-black g-font-weight-700 mb-1">{{ template.name }}</h3>
                                                        <p class="g-font-size-13 mb-0">{{ template.description }}</p>
                                                    </div>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <div class="col-sm-12 form-group">
                                        {{ form_label(form.colorTheme, null, {'label_attr':{'class':'g-mb-10'}}) }}
                                        {{ form_widget(form.colorTheme, {'attr':{'class':'form-control form-control-md rounded-0 colorpicker'}}) }}
                                    </div>

                                    <div class="col-sm-12 form-group text-right mt50">
                                        <button type="submit" class="btn btn-blue btn-lg">Suivant</button>
                                    </div>

                                    {{ form_end(form) }}
                                </div>
                            </div>
                        </div>
                        <!-- End Tab panes -->
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

    {% block javascripts %}
        <script src="{{ asset('bundles/colorpicker/js/jqColorPicker.min.js') }}"></script>
        <script src="{{ asset('assets/plugins/unitegallery/js/unitegallery.js') }}"></script>
        <script src="{{ asset('assets/plugins/unitegallery/themes/tilesgrid/ug-theme-tilesgrid.js') }}"></script>
        <script src="{{ asset('assets/bo/js/components/hs.tabs.js') }}"></script>
        <script src="{{ asset('assets/bo/vendor/cubeportfolio-full/cubeportfolio/js/jquery.cubeportfolio.min.js') }}"></script>
        <script src="{{ asset('assets/bo/js/components/hs.cubeportfolio.js') }}"></script>
        <script type="text/javascript">
            $(document).on('ready', function () {
                // initialization of tabs
                $.HSCore.components.HSTabs.init('[role="tablist"]');

                setTimeout(function () {
                    $.HSCore.components.HSTabs.init('[role="tablist"]');
                }, 200);

                // initialization of cubeportfolio
                $.HSCore.components.HSCubeportfolio.init('.cbp');

                $(".cbp-item").on('click', function (e) {
                    $(".cbp-item").removeClass('selected');
                    $(this).addClass('selected');
                    $('#add_order_template').val($(this).data('id'));
                });

                $('.colorpicker').colorPicker();
            });
        </script>
    {% endblock %}
